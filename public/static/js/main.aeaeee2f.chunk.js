(this["webpackJsonpapp-react-myblog"]=this["webpackJsonpapp-react-myblog"]||[]).push([[0],{101:function(e,t,a){},215:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a(36),n=a.n(c),r=a(4),i=(a(101),a(32)),l=a(89),o=a(3),d="[ui] OPEN_MODAL_REGISTER",u="[ui] CLOSE_MODAL_REGISTER",j="[ui] OPEN_MODAL_LOGIN",b="[ui] CLOSE_MODAL_LOGIN",m="[ui] OPEN_MODAL_NEW_POST",h="[ui] CLOSE_MODAL_NEW_POST",O="[ui] OPEN_MODAL_UPDATE_POST",p="[ui] CLOSE_MODAL_UPDATE_POST",x="[auth] FINISH_CHECKING_LOGIN_STATE",f="[auth] LOGIN",g="[auth] START_REGISTER",N="[auth] LOGOUT",v={user:{uid:null,name:null,surname:null,email:null,img_avatar:null,facebookUrl:null,twitterUrl:null,githubUrl:null,linkedinUrl:null},logged:!1,checking:!0},_={modalRegisterOpen:!1,modalLoginOpen:!1,modalNewPostOpen:!1,modalUpdatePostOpen:!1},w=Object(i.b)({ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(o.a)(Object(o.a)({},e),{},{modalRegisterOpen:!0});case u:return Object(o.a)(Object(o.a)({},e),{},{modalRegisterOpen:!1});case j:return Object(o.a)(Object(o.a)({},e),{},{modalLoginOpen:!0});case b:return Object(o.a)(Object(o.a)({},e),{},{modalLoginOpen:!1});case m:return Object(o.a)(Object(o.a)({},e),{},{modalNewPostOpen:!0});case h:return Object(o.a)(Object(o.a)({},e),{},{modalNewPostOpen:!1});case O:return Object(o.a)(Object(o.a)({},e),{},{modalUpdatePostOpen:!0});case p:return Object(o.a)(Object(o.a)({},e),{},{modalUpdatePostOpen:!1});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:case f:return{user:t.payload,logged:!0,checking:!1};case x:case N:return Object(o.a)(Object(o.a)({},v),{},{checking:!1});default:return e}}}),k="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.c,y=Object(i.d)(w,k(Object(i.a)(l.a))),S=a(15),P=a(6),U=a(5),E=a.n(U),T=a(12),C=a(13),L=a.n(C),A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split(" ");return(t=t.map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)}))).join(" ")},I=a(90);a.n(I).a.config();var q="https://api-backend-myblog.herokuapp.com/api/",M=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",s="".concat(q,"/").concat(e);return"GET"===a?fetch(s):fetch(s,{method:a,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},D=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",s="".concat(q,"/").concat(e),c=localStorage.getItem("token")||"";return"GET"===a?fetch(s,{method:a,headers:{Authorization:c}}):fetch(s,{method:a,headers:{"Content-type":"application/json",Authorization:c},body:JSON.stringify(t)})},B=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST",s="".concat(q,"/").concat(e),c=localStorage.getItem("token")||"";return fetch(s,{method:a,headers:{Authorization:c},body:t,redirect:"follow"})},R=function(){return{type:j}},F=function(){return{type:b}},z=function(){return{type:d}},G=function(){return{type:u}},Z=function(){return{type:m}},V=function(){return{type:h}},Y=function(){return{type:O}},$=function(){return{type:p}},H=function(e){return function(){var t=Object(T.a)(E.a.mark((function t(a){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:L.a.fire({title:"Confirme para desconectarse",showDenyButton:!0,confirmButtonText:"Yes",denyButtonText:"No"}).then((function(t){if(t.isConfirmed)localStorage.clear("token"),localStorage.clear("token-init"),a({type:N}),e.push("/");else if(t.isDenied)return}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},J=function(e,t){return function(){var a=Object(T.a)(E.a.mark((function a(s){return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:L.a.fire({title:"\xbfDesea Eliminar el Usuario?",showDenyButton:!0,confirmButtonText:"Yes",denyButtonText:"No"}).then(function(){var a=Object(T.a)(E.a.mark((function a(c){var n,r;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!c.isConfirmed){a.next=11;break}return a.next=3,D("users/".concat(t),{},"DELETE");case 3:return n=a.sent,a.next=6,n.json();case 6:r=a.sent,n.ok?(L.a.fire("Usuario Eliminado!",r.msg,"success"),localStorage.clear("token"),localStorage.clear("token-init"),s({type:N}),e.push("/")):L.a.fire("Oops...",r.error.toLocaleString(),"error"),a.next=13;break;case 11:if(!c.isDenied){a.next=13;break}return a.abrupt("return");case 13:case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}());case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},W=function(e){return{type:g,payload:e}},X=function(e){return{type:f,payload:e}},K=a(0),Q=function(e){var t=e.text,a=e.handleClick;return Object(K.jsx)("button",{className:"btn_modal",onClick:a,children:t})},ee=a(21),te=a.n(ee),ae=a(17),se=function(e){var t=e.changeModal,a=Object(ae.d)(),s=a.register,c=a.handleSubmit,n=a.formState.errors,i=Object(r.b)();return Object(K.jsx)("div",{className:"form-container",children:Object(K.jsx)("div",{className:"form-inner",children:Object(K.jsxs)("form",{className:"login",onSubmit:c((function(e){var t;i((t=e,function(){var e=Object(T.a)(E.a.mark((function e(a){var s,c,n,r,i,l,o,d;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M("auth/signin",t,"POST");case 2:return s=e.sent,e.next=5,s.json();case 5:c=e.sent,s.ok?(localStorage.setItem("token",c.token),localStorage.setItem("token-init",(new Date).getTime()),n=c.user,r=n.email,i=n.name,l=n.surname,o=n.uid,d=n.img,a(X({email:r,name:i,surname:l,uid:o,img:d})),L.a.fire("Bienvenido!",A("".concat(i," ").concat(l)),"success"),a(F())):L.a.fire("Oops...",c.error.toLocaleString(),"error");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))})),children:[Object(K.jsxs)("div",{className:"field",children:[Object(K.jsx)("input",Object(o.a)({type:"email",placeholder:"Email Address"},s("email",{required:"Email es requerido",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"Introduzca email valido."}}))),n.email&&Object(K.jsx)("p",{className:"error",children:n.email.message})]}),Object(K.jsxs)("div",{className:"field",children:[Object(K.jsx)("input",Object(o.a)({type:"password",placeholder:"Password"},s("password",{required:"Pasword es requerido",pattern:{value:/^(?=.*\d)(?=.*[a-zA-Z]).{8,}$/,message:"Password: min 8 caracteres, 1 numero"}}))),n.password&&Object(K.jsx)("p",{className:"error",children:n.password.message})]}),Object(K.jsxs)("div",{className:"field btn",children:[Object(K.jsx)("div",{className:"btn-layer"}),Object(K.jsx)("input",{type:"submit",value:"Login"})]}),Object(K.jsx)("div",{className:"signup-link",children:Object(K.jsxs)("p",{children:["Not a member? ",Object(K.jsx)("span",{onClick:t,children:"Signup now"})]})})]})})})},ce={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};te.a.setAppElement("#root");var ne=function(){var e=Object(r.c)((function(e){return e.ui})).modalLoginOpen,t=Object(r.b)();return Object(K.jsx)("div",{children:Object(K.jsx)(te.a,{isOpen:e,onRequestClose:function(){t(F())},style:ce,overlayClassName:"modal-fondo",children:Object(K.jsxs)("div",{className:"modal",children:[Object(K.jsxs)("div",{className:"title-login",children:[Object(K.jsx)("h3",{children:"Login"}),Object(K.jsx)("hr",{})]}),Object(K.jsx)(se,{changeModal:function(){t(F()),t(z())}})]})})})},re=a(7),ie=a(47),le=a(30),oe=a(14),de="500000",ue=["image/jpeg","image/png"],je=oe.b().shape({title:oe.c().required("Titulo es requerido.").min(2,"Minimo 2 caracteres").max(50,"Maximo 50 caracteres"),subtitle:oe.c().required("Subtitulo es requerido.").min(2,"Minimo 2 caracteres").max(150,"Maximo 150 caracteres"),image:oe.a().nullable().test("FILE_SIZE","Imagen es requerida",(function(e){return!e||e.length>0})).test("FILE_SIZE","Imagen demasiado grande.",(function(e){return!e||e&&e.length>0&&e[0].size<=de})).test("FILE_FORMAT","Formato no soportado (jpeg, png)",(function(e){return!e||e&&e.length>0&&ue.includes(e[0].type)}))}),be=oe.b().shape({title:oe.c().required("Titulo es requerido.").min(2,"Minimo 2 caracteres").max(50,"Maximo 50 caracteres"),subtitle:oe.c().required("Subtitulo es requerido.").min(2,"Minimo 2 caracteres").max(150,"Maximo 150 caracteres"),image:oe.a().test("FILE_SIZE","Imagen demasiado grande.",(function(e){return!e||!e.length||e[0].size<=de})).test("FILE_FORMAT","Formato no soportado (jpeg, png)",(function(e){return!e||!e.length||ue.includes(e[0].type)}))}),me=oe.b().shape({name:oe.c().required("Nombre es requerido.").min(2,"Minimo 2 caracteres").max(50,"Maximo 50 caracteres"),surname:oe.c().required("Apellido es requerido.").min(2,"Minimo 2 caracteres").max(150,"Maximo 150 caracteres"),email:oe.c().email().required("Email es requerido.").min(2,"Minimo 2 caracteres").max(150,"Maximo 100 caracteres"),githubUrl:oe.c().url("No es una url valida"),facebookUrl:oe.c().url("No es una url valida"),twitterUrl:oe.c().url("No es una url valida"),linkedinUrl:oe.c().url("No es una url valida"),oldPassword:oe.c().test("PASS_EMPTY","Password: min 8 caracteres, 1 numero",(function(e){return!e||!e.length||e.match(/^(?=.*\d)(?=.*[a-zA-Z]).{8,}$/)})),newPassword:oe.c().test("PASS_EMPTY","Password: min 8 caracteres, 1 numero",(function(e){return!e||!e.length||e.match(/^(?=.*\d)(?=.*[a-zA-Z]).{8,}$/)})),image:oe.a().test("FILE_SIZE","Imagen demasiado grande.",(function(e){return!e||!e.length||e[0].size<="500000"})).test("FILE_FORMAT","Formato no soportado (jpeg, png)",(function(e){return!e||!e.length||ue.includes(e[0].type)}))}),he=function(e,t){return Object(T.a)(E.a.mark((function a(){return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:L.a.fire({title:"Confirme para Eliminar Post",showDenyButton:!0,confirmButtonText:"Yes",denyButtonText:"No"}).then(function(){var a=Object(T.a)(E.a.mark((function a(s){var c,n;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!s.isConfirmed){a.next=13;break}return a.next=3,D("posts/".concat(t),{},"DELETE");case 3:return c=a.sent,a.next=6,c.json();case 6:n=a.sent,console.log(n),c.ok?(L.a.fire("Post eliminado","El post fue eliminado stisfactoriamente","success"),e.push("/")):L.a.fire("Oops...",n.error.toLocaleString(),"error"),e.push("/"),a.next=15;break;case 13:if(!s.isDenied){a.next=15;break}return a.abrupt("return");case 15:case 16:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}());case 1:case"end":return a.stop()}}),a)})))},Oe=function(){var e=Object(s.useState)({article:""}),t=Object(re.a)(e,2),a=t[0],c=t[1],n=Object(ae.d)({resolver:Object(le.a)(je)}),i=n.register,l=n.handleSubmit,d=n.watch,u=n.formState.errors,j=d("image",[]),b=Object(P.g)(),m=Object(r.b)();return Object(K.jsx)("div",{children:Object(K.jsxs)("form",{className:"new-post-form",onSubmit:l((function(e){var t=new FormData;t.append("title",e.title),t.append("subtitle",e.subtitle),t.append("article",a.article),t.append("archivo",e.image[0]),m(function(e,t){return function(){var a=Object(T.a)(E.a.mark((function a(s){var c,n;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,B("posts",e,"POST");case 2:return c=a.sent,a.next=5,c.json();case 5:n=a.sent,c.ok?(L.a.fire("Post creado!","Ya puede acceder al post","success"),s(V()),t.push("/posts/".concat(n.data._id))):L.a.fire("Oops...",n.error.toLocaleString(),"error");case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(t,b))})),children:[Object(K.jsx)("div",{className:"field",children:Object(K.jsx)("input",Object(o.a)({className:"form-input ",type:"text",placeholder:"Title"},i("title")))}),u.title&&Object(K.jsx)("p",{className:"error",children:u.title.message}),Object(K.jsx)("div",{className:"field",children:Object(K.jsx)("input",Object(o.a)({className:"form-input ",type:"text",placeholder:"Subtitle"},i("subtitle")))}),u.subtitle&&Object(K.jsx)("p",{className:"error",children:u.subtitle.message}),Object(K.jsxs)("div",{className:"field-box",children:[Object(K.jsx)("label",{htmlFor:"imageUrl",className:"input-file",children:"Image Post"}),Object(K.jsx)("p",{className:"text-input-file",children:j[0]?j[0].name:"Choose your image..."}),Object(K.jsx)("input",Object(o.a)({hidden:!0,type:"file",id:"imageUrl"},i("image")))]}),u.image&&Object(K.jsx)("p",{className:"error",children:u.image.message}),Object(K.jsx)("div",{className:"box_editor",children:Object(K.jsx)(ie.a,{outputFormat:"html",init:{height:300,width:820,resize:!1,plugins:"code link image imagetools",toolbar:"undo redo | formatselect |forecolor backcolor | bold italic underline | alignleft aligncenter alignright | bullist numlist | link image tinydrive | code"},onEditorChange:function(e){return function(e){c({article:e})}(e)},value:a.article,textareaName:"content"})}),Object(K.jsxs)("div",{className:"btn-box",children:[Object(K.jsx)("button",{className:"button btn_call",id:"save-button",children:"Save"}),Object(K.jsx)("button",{className:"button btn_call",id:"clear-button",onClick:function(e){e.preventDefault(),c({article:""})},children:"Clean"})]})]})})},pe={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};te.a.setAppElement("#root");var xe=function(){var e=Object(r.c)((function(e){return e.ui})).modalNewPostOpen,t=Object(r.b)(),a=function(){t(V())};return Object(K.jsx)("div",{children:Object(K.jsx)(te.a,{isOpen:e,onRequestClose:a,style:pe,overlayClassName:"modal-fondo",children:Object(K.jsxs)("div",{className:"modal-newpost",children:[Object(K.jsxs)("div",{className:"title-login",children:[Object(K.jsx)("h3",{children:"Create New Blog Post"}),Object(K.jsx)("hr",{})]}),Object(K.jsx)(Oe,{modalClose:a})]})})})},fe=function(e){var t=e.changeModal,a=(e.modalClose,Object(ae.d)()),c=a.register,n=a.handleSubmit,i=a.watch,l=a.formState.errors,d=Object(s.useRef)({});d.current=i("password","");var u=Object(r.b)();return Object(K.jsx)("div",{className:"form-container",children:Object(K.jsx)("div",{className:"form-inner",children:Object(K.jsxs)("form",{className:"signup-form",onSubmit:n((function(e){var t;u((t=e,function(){var e=Object(T.a)(E.a.mark((function e(a){var s,c,n,r,i,l,o,d;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M("auth/signup",t,"POST");case 2:return s=e.sent,e.next=5,s.json();case 5:c=e.sent,s.ok?(localStorage.setItem("token",c.token),localStorage.setItem("token-init",(new Date).getTime()),n=c.user,r=n.email,i=n.name,l=n.surname,o=n.uid,d=n.img,a(W({email:r,name:i,surname:l,uid:o,img:d})),L.a.fire("Bienvenido!","".concat(A("".concat(i," ").concat(l)),", ya formas parte de MyBlog!"),"success"),a(G())):L.a.fire("Oops...",c.error.toLocaleString(),"error");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))})),children:[Object(K.jsxs)("div",{className:"signup-field",children:[Object(K.jsx)("input",Object(o.a)({type:"text",placeholder:"First Name"},c("name",{required:"Nombre es requerido.",maxLength:80,minLength:{value:2,message:"Nombre necesita min 2 letras."}}))),l.name&&Object(K.jsx)("p",{className:"error",children:l.name.message})]}),Object(K.jsxs)("div",{className:"signup-field",children:[Object(K.jsx)("input",Object(o.a)({type:"text",placeholder:"Last Name"},c("surname",{required:"Apellido es requerido.",maxLength:100,minLength:{value:2,message:"Apellido necesita min 8 letras."}}))),l.surname&&Object(K.jsx)("p",{className:"error",children:l.surname.message})]}),Object(K.jsxs)("div",{className:"signup-field",children:[Object(K.jsx)("input",Object(o.a)({type:"text",placeholder:"Email"},c("email",{required:"Email es requerido",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"Introduzca email valido."}}))),l.email&&Object(K.jsx)("p",{className:"error",children:l.email.message})]}),Object(K.jsxs)("div",{className:"signup-field",children:[Object(K.jsx)("input",Object(o.a)({type:"password",placeholder:"Password"},c("password",{required:"Pasword es requerido",pattern:{value:/^(?=.*\d)(?=.*[a-zA-Z]).{8,}$/,message:"Password: min 8 caracteres, 1 numero"}}))),l.password&&Object(K.jsx)("p",{className:"error",children:l.password.message})]}),Object(K.jsxs)("div",{className:"signup-field",children:[Object(K.jsx)("input",Object(o.a)({type:"password",placeholder:"Confirm password"},c("password_repeat",{required:"Pasword es requerido",validate:function(e){return e===d.current||"Paswords no son iguales"}}))),l.password_repeat&&Object(K.jsx)("p",{className:"error",children:l.password_repeat.message})]}),Object(K.jsxs)("div",{className:"field btn",children:[Object(K.jsx)("div",{className:"btn-layer"}),Object(K.jsx)("input",{type:"submit",value:"Signup"})]}),Object(K.jsx)("div",{className:"signup-link",children:Object(K.jsxs)("p",{children:[" You are a member? ",Object(K.jsx)("span",{onClick:t,children:"Login now"})]})})]})})})},ge={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};te.a.setAppElement("#root");var Ne=function(){var e=Object(r.c)((function(e){return e.ui})).modalRegisterOpen,t=Object(r.b)(),a=function(){t(G())};return Object(K.jsx)("div",{children:Object(K.jsx)(te.a,{isOpen:e,onRequestClose:a,style:ge,overlayClassName:"modal-fondo",children:Object(K.jsxs)("div",{className:"modal",children:[Object(K.jsxs)("div",{className:"title-login",children:[Object(K.jsx)("h3",{children:"Signup"}),Object(K.jsx)("hr",{}),Object(K.jsx)("p",{className:"text_login",children:"Create your account it\xb4s free."})]}),Object(K.jsx)(fe,{changeModal:function(){t(G()),t(R())},modalClose:a})]})})})},ve=function(){var e=Object(P.g)(),t=Object(r.b)(),a=Object(r.c)((function(e){return e.auth})),s=a.logged,c=a.user;return Object(K.jsxs)("div",{className:"navbar_ppal",children:[Object(K.jsx)(S.b,{to:"/",children:Object(K.jsx)("div",{className:"img_logo"})}),!s&&Object(K.jsx)("div",{className:"navbar_auth",children:Object(K.jsxs)("ul",{className:"navbar_list",children:[Object(K.jsx)("li",{className:"navbar_item",children:Object(K.jsx)(Q,{text:"Login",handleClick:function(){t(R())}})}),Object(K.jsx)("li",{className:"navbar_item",children:Object(K.jsx)(Q,{text:"Signup",handleClick:function(){t(z())}})})]})}),s&&Object(K.jsxs)("div",{className:"navbar_auth",children:[Object(K.jsxs)("ul",{className:"navbar_list",children:[Object(K.jsx)("li",{className:"navbar_item",children:Object(K.jsx)(Q,{text:"New Post",handleClick:function(){t(Z())}})}),Object(K.jsx)("li",{className:"navbar_item",children:Object(K.jsx)(Q,{text:"Logout",handleClick:function(){t(H(e))}})})]}),Object(K.jsx)("div",{className:"navbar_user_img",children:Object(K.jsx)(S.b,{to:"/users/".concat(c.uid),children:Object(K.jsx)("img",{src:c.img,className:"user_img",alt:c.name})})})]}),Object(K.jsxs)("div",{className:"modals",hidden:!0,children:[Object(K.jsx)(Ne,{}),Object(K.jsx)(ne,{}),Object(K.jsx)(xe,{})]})]})},_e=function(){var e=Object(r.c)((function(e){return e.auth})).user,t=Object(r.b)();return Object(K.jsx)("div",{className:"home_header",children:Object(K.jsxs)("div",{className:"box_header",children:[Object(K.jsxs)("h1",{className:"header_title",children:[A("Bienvenido ".concat(e.name," ").concat(e.surname)),"! ",Object(K.jsx)("br",{}),"Postea y comparte con la comunidad",Object(K.jsx)("br",{}),"Aprende compartiendo..."]}),Object(K.jsx)("button",{className:"btn_call",onClick:function(){t(Z())},children:"New Post"})]})})},we=function(){var e=Object(r.b)();return Object(K.jsx)("div",{className:"home_header",children:Object(K.jsxs)("div",{className:"box_header",children:[Object(K.jsxs)("h1",{className:"header_title",children:["Bienvenido a MyBlog! ",Object(K.jsx)("br",{}),"Registrate y crea con la comunidad ",Object(K.jsx)("br",{}),"Aprende compartiendo..."]}),Object(K.jsx)("button",{className:"btn_call",onClick:function(){e(R())},children:"Login"}),Object(K.jsx)("button",{className:"btn_call",onClick:function(){e(z())},children:"Signup"})]})})},ke=a(31),ye=a.n(ke);a(214);ye.a.locale("es");var Se=function(e){return ye()().diff(e,"seconds")<86400?ye()(e).startOf("minutes").fromNow():ye()(e).format("DD/MM/YYYY")},Pe=function(e){var t=e.post,a=t.title,s=t.subtitle,c=t.img,n=t._id,r=t.createdAt,i=t.author,l=Se(r);return Object(K.jsxs)("div",{className:"post_card",children:[Object(K.jsx)("div",{className:"card_img_box",children:Object(K.jsx)("img",{className:"card_img",src:c,alt:"post"})}),Object(K.jsxs)("div",{className:"card_header",children:[Object(K.jsx)("h3",{className:"card_title",children:a}),Object(K.jsx)("h4",{className:"card_subtitle",children:s})]}),Object(K.jsxs)("div",{className:"author_comp",children:[Object(K.jsx)("img",{src:i.img,className:"author_img",alt:"author"}),Object(K.jsx)(S.b,{to:"/users/".concat(i.uid),children:Object(K.jsx)("p",{className:"author_name",children:A("".concat(i.name," ").concat(i.surname))})}),Object(K.jsx)("p",{className:"date_post",children:l})]}),Object(K.jsx)("p",{className:"post_date"}),Object(K.jsx)("div",{className:"card_call",children:Object(K.jsx)(S.b,{to:"/posts/".concat(n),children:Object(K.jsx)("button",{className:"card_call_btn btn_call",children:"Leer"})})})]})},Ue=function(){var e="posts?page=1",t=Object(s.useState)({error:null,loading:!0,data:null}),a=Object(re.a)(t,2),c=a[0],n=a[1];return Object(s.useEffect)((function(){M(e).then((function(e){return e.json()})).then((function(e){n({error:null,loading:!1,data:e.data.posts})})).catch((function(e){n({data:null,loading:!1,error:e})}))}),[e]),Object(K.jsx)("div",{className:"posts_container",children:Object(K.jsxs)("div",{className:"posts_cards",children:[Object(K.jsx)("h2",{className:"posts_title result_text",children:"Posts de la comunidad"}),c.data&&c.data.map((function(e){return Object(K.jsx)(Pe,{post:e},e._id)}))]})})},Ee=function(){var e=Object(r.c)((function(e){return e.auth})).logged;return Object(K.jsxs)("div",{className:"homeScreen",children:[e?Object(K.jsx)(_e,{}):Object(K.jsx)(we,{}),Object(K.jsx)("div",{className:"home_body",children:Object(K.jsx)(Ue,{})})]})},Te=function(e){var t=e.post,a={title:t.data.title,subtitle:t.data.subtitle,image:[],article:t.data.article},c=Object(s.useState)({article:a.article}),n=Object(re.a)(c,2),i=n[0],l=n[1],d=Object(ae.d)({resolver:Object(le.a)(be)}),u=d.register,j=d.handleSubmit,b=d.watch,m=d.reset,h=d.formState.errors,O=b("image",[]),p=Object(P.g)(),x=Object(r.b)();return Object(K.jsx)("div",{children:Object(K.jsxs)("form",{className:"new-post-form",onSubmit:j((function(e){var a=new FormData;a.append("title",e.title),a.append("subtitle",e.subtitle),a.append("article",i.article),(e.image||e.image.length)&&a.append("archivo",e.image[0]),x(function(e,t,a){return function(){var s=Object(T.a)(E.a.mark((function s(c){var n,r;return E.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,B("posts/".concat(a),e,"PUT");case 2:return n=s.sent,s.next=5,n.json();case 5:r=s.sent,n.ok?(L.a.fire("!Post actualizado!","Ya puede acceder al post \n                Recargue la pagina","success"),c($()),t.push("/posts/".concat(r.data._id))):L.a.fire("Oops...",r.error.toLocaleString(),"error");case 8:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()}(a,p,t.data._id))})),children:[Object(K.jsx)("div",{className:"field",children:Object(K.jsx)("input",Object(o.a)({className:"form-input ",type:"text",defaultValue:a.title,placeholder:"Title"},u("title")))}),h.title&&Object(K.jsx)("p",{className:"error",children:h.title.message}),Object(K.jsx)("div",{className:"field",children:Object(K.jsx)("input",Object(o.a)({className:"form-input ",type:"text",defaultValue:a.subtitle,placeholder:"Subtitle"},u("subtitle")))}),h.subtitle&&Object(K.jsx)("p",{className:"error",children:h.subtitle.message}),Object(K.jsxs)("div",{className:"field-box",children:[Object(K.jsx)("label",{htmlFor:"imageUrl",className:"input-file",children:"Image Post"}),Object(K.jsx)("p",{className:"text-input-file",children:O[0]?O[0].name:"Choose your image..."}),Object(K.jsx)("input",Object(o.a)({hidden:!0,type:"file",defaultValue:[],id:"imageUrl"},u("image")))]}),h.image&&Object(K.jsx)("p",{className:"error",children:h.image.message}),Object(K.jsx)("div",{className:"box_editor",children:Object(K.jsx)(ie.a,{outputFormat:"html",init:{height:300,width:820,resize:!1,plugins:"code link image imagetools",toolbar:"undo redo | formatselect |forecolor backcolor | bold italic underline | alignleft aligncenter alignright | bullist numlist | link image tinydrive | code"},onEditorChange:function(e){return function(e){l({article:e})}(e)},value:i.article,textareaName:"content"})}),Object(K.jsxs)("div",{className:"btn-box",children:[Object(K.jsx)("button",{className:"button btn_call",id:"save-button",children:"Edit"}),Object(K.jsx)("button",{className:"button btn_call",id:"clear-button",onClick:function(e){e.preventDefault(),l({article:a.article}),m()},children:"Reset"})]})]})})},Ce={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};te.a.setAppElement("#root");var Le=function(e){var t=e.post,a=Object(r.c)((function(e){return e.ui})).modalUpdatePostOpen,s=Object(r.b)(),c=function(){s($())};return Object(K.jsx)("div",{children:Object(K.jsx)(te.a,{isOpen:a,onRequestClose:c,style:Ce,overlayClassName:"modal-fondo",children:Object(K.jsxs)("div",{className:"modal-newpost",children:[Object(K.jsxs)("div",{className:"title-login",children:[Object(K.jsx)("h3",{children:"Update Blog Post"}),Object(K.jsx)("hr",{})]}),Object(K.jsx)(Te,{modalClose:c,post:t})]})})})},Ae=function(e){var t=e.post,a=Object(r.b)(),s=Object(P.g)();return Object(K.jsxs)("div",{className:"owner_actions",children:[Object(K.jsx)("button",{className:"btn_update_post",onClick:function(){a(Y())},children:Object(K.jsx)("i",{className:"bi bi-pencil-fill"})}),Object(K.jsx)(Le,{post:t}),Object(K.jsx)("button",{className:"btn_delete_post",onClick:function(){a(he(s,t.data._id))},children:Object(K.jsx)("i",{className:"bi bi-trash-fill"})})]})},Ie=function(e){var t=e.match,a="posts/".concat(t.params.idPost),c=Object(r.c)((function(e){return e.auth})).user,n=Object(s.useState)({error:null,loading:!0,data:null,datePost:null}),i=Object(re.a)(n,2),l=i[0],d=i[1];Object(s.useEffect)((function(){M(a).then((function(e){return e.json()})).then((function(e){d({error:null,loading:!1,data:e.data,datePost:Se(e.data.createdAt)})})).catch((function(e){d((function(t){return Object(o.a)(Object(o.a)({},t),{},{loading:!1,error:e})}))}))}),[a]);return Object(K.jsx)("div",{className:"post_screen",children:l.data&&Object(K.jsxs)("div",{className:"post_container",children:[Object(K.jsx)("div",{className:"post_header_img",children:Object(K.jsx)("img",{src:l.data.img,className:"screen_img",alt:"post"})}),Object(K.jsxs)("div",{className:"post_header",children:[Object(K.jsxs)("div",{className:"author_post_screen",children:[Object(K.jsx)("img",{src:l.data.author.img,className:"author_img",alt:"author"}),Object(K.jsx)(S.b,{to:"/users/".concat(l.data.author.uid),children:Object(K.jsx)("p",{className:"author_name",children:A("".concat(l.data.author.name," ").concat(l.data.author.surname))})}),Object(K.jsx)("p",{className:"date_post",children:l.datePost}),function(){if(l.data.author.uid===c.uid)return Object(K.jsx)(Ae,{post:l})}()]}),Object(K.jsxs)("div",{className:"titles_box",children:[Object(K.jsx)("h1",{className:"post_title",children:l.data.title}),Object(K.jsx)("h3",{className:"post_subtitle",children:l.data.subtitle})]})]}),Object(K.jsx)("div",{className:"post_article",children:Object(K.jsx)("div",{dangerouslySetInnerHTML:{__html:l.data.article}})})]})})},qe=function(e){var t=e.user;return Object(K.jsxs)("div",{className:"user_social_urls",children:[Object(K.jsx)("a",{href:t.githubUrl?t.githubUrl:"https://github.com/",target:"_blank",rel:"noreferrer",children:Object(K.jsx)("i",{className:"bi bi-github"})}),Object(K.jsx)("a",{href:t.facebookUrl?t.facebookUrl:"https://www.facebook.com/",target:"_blank",rel:"noreferrer",children:Object(K.jsx)("i",{className:"bi bi-facebook"})}),Object(K.jsx)("a",{href:t.twitterUrl?t.twitterUrl:"https://twitter.com/?lang=es",target:"_blank",rel:"noreferrer",children:Object(K.jsx)("i",{className:"bi bi-twitter"})}),Object(K.jsx)("a",{href:t.linkedinUrl?t.linkedinUrl:"https://www.linkedin.com/",target:"_blank",rel:"noreferrer",children:Object(K.jsx)("i",{className:"bi bi-linkedin"})})]})},Me=function(e){var t=e.author,a=Object(r.c)((function(e){return e.auth})).user;return Object(K.jsx)("div",{className:"box_header box_user_header",children:Object(K.jsxs)("div",{className:"user_card_box",children:[Object(K.jsx)("img",{src:t.img,className:"user_img",alt:t.name}),Object(K.jsx)("p",{className:"user_name",children:A("".concat(t.name," ").concat(t.surname))}),Object(K.jsx)(qe,{user:t}),a.uid===t.uid&&Object(K.jsx)(S.b,{to:"/edit-user",children:Object(K.jsx)("button",{className:"btn_edit_user",children:"Editar Perfil"})})]})})},De=function(e){var t=e.posts;return Object(K.jsx)("div",{className:"posts_container user_posts",children:Object(K.jsxs)("div",{className:"posts_cards",children:[Object(K.jsx)("h2",{className:" result_text",children:"Ultimos posts"}),t.map((function(e){return Object(K.jsx)(Pe,{post:e},e._id)}))]})})},Be=function(e){var t=e.match,a=Object(s.useState)({data:null}),c=Object(re.a)(a,2),n=c[0],r=c[1],i="posts?author=".concat(t.params.idUser,"&page=1");return Object(s.useEffect)((function(){M(i).then((function(e){return e.json()})).then((function(e){r({data:e.data})})).catch((function(e){console.log(e)}))}),[i]),Object(K.jsxs)("div",{className:"user_screen",children:[Object(K.jsx)("div",{className:" user_header home_header",children:n.data&&Object(K.jsx)(Me,{author:n.data.author})}),n.data&&Object(K.jsx)(De,{posts:n.data.posts})]})},Re=function(e){var t=e.setPostsSearch,a=Object(ae.d)(),s=a.register,c=a.handleSubmit,n=function(e){var a="posts?search=".concat(e,"&page=1");M(a).then((function(e){return e.json()})).then((function(e){var a=r(e.data);t({posts:e.data.posts,result:a})})).catch((function(e){L.a.fire("Oops...",e.error.toLocaleString(),"error")}))},r=function(e){return e.posts.length?"Se encontraron ".concat(e.total_posts,' post que incluyan "').concat(e.query,'"'):'No se encuentran resultados para "'.concat(e.query,'"')};return Object(K.jsx)("div",{className:"container_form_search container_form_edit",children:Object(K.jsx)("form",{className:"edit_user_form",onSubmit:c((function(e){n(e.search)})),children:Object(K.jsxs)("div",{className:"search_field edit_user_field",children:[Object(K.jsx)("input",Object(o.a)({type:"text",placeholder:"Search.."},s("search"))),Object(K.jsx)("button",{className:"btn_search",type:"submit",children:Object(K.jsx)("i",{className:"bi bi-search"})})]})})})},Fe=function(){var e=Object(s.useState)({posts:[],result:"Busque sus posts favoritos..."}),t=Object(re.a)(e,2),a=t[0],c=t[1];return Object(K.jsxs)("div",{className:"search_screen",children:[Object(K.jsx)("div",{className:"search_header home_header",children:Object(K.jsx)("div",{className:"box_header",children:Object(K.jsx)("h1",{className:"header_title ",children:"Busca tus posts favoritos por titulo"})})}),Object(K.jsx)(Re,{setPostsSearch:c}),Object(K.jsxs)("div",{className:"container_posts_search posts_cards",children:[Object(K.jsx)("h3",{className:"result_text",children:a.result}),a.posts.map((function(e){return Object(K.jsx)(Pe,{post:e},e._id)}))]})]})},ze=function(e){var t=e.btnType,a=e.textBtn,s=e.handleClick;return Object(K.jsxs)("div",{className:"options_box_btn",onClick:s,children:[Object(K.jsx)("button",{className:"options_btn",children:Object(K.jsx)("i",{className:t,style:{color:"#ffff",fontSize:"1.3rem"}})}),Object(K.jsx)("p",{className:"text_btn",children:a})]})},Ge=function(e){var t=e.postId,a=Object(r.b)(),s=Object(P.g)();return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)("li",{className:"options_item",children:Object(K.jsx)(ze,{btnType:"bi bi-pencil",textBtn:"Edit Post",handleClick:function(){a(Y())}})}),Object(K.jsx)("li",{className:"options_item",children:Object(K.jsx)(ze,{btnType:"bi bi-trash",textBtn:"Delete Post",handleClick:function(){a(he(s,t))}})})]})},Ze=function(){var e=Object(r.c)((function(e){return e.auth})).user,t=Object(r.b)(),a=Object(P.g)();return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)("li",{className:"options_item",children:Object(K.jsx)(S.b,{to:"/edit-user",children:Object(K.jsx)(ze,{btnType:"bi bi-pencil",textBtn:"Edit User"})})}),Object(K.jsx)("li",{className:"options_item",children:Object(K.jsx)(ze,{btnType:"bi bi-trash",textBtn:"Delete User",handleClick:function(){t(J(a,e.uid))}})})]})},Ve=function(e){var t=e.match,a=Object(P.g)(),c=Object(r.b)(),n=Object(r.c)((function(e){return e.auth})).user,i=Object(s.useState)({data:null}),l=Object(re.a)(i,2),o=l[0],d=l[1],u=a.location.pathname.split("/")[1],j="posts"===u?"".concat(u,"/").concat(t.params.idPost):"users"===u?"".concat(u,"/").concat(t.params.idUser):void 0;Object(s.useEffect)((function(){"posts"!==u&&"users"!==u||M(j).then((function(e){return e.json()})).then((function(e){d({data:e.data})})).catch((function(e){console.log(e)}))}),[u,j]);var b=function(){switch(console.log(u),u){case"posts":return n.uid===o.data.author.uid?Object(K.jsx)(Ge,{postId:t.params.idPost}):void 0;case"users":return n.uid===t.params.idUser?Object(K.jsx)(Ze,{}):void 0;case"edit-user":return Object(K.jsx)(Ze,{});default:return}};return Object(K.jsx)("div",{className:"options_bar",children:Object(K.jsxs)("div",{className:"extends_bar",children:[Object(K.jsxs)("ul",{className:"options_list options_list_nav",children:[Object(K.jsx)("li",{className:"options_item",children:Object(K.jsx)(S.c,{exact:!0,to:"/",children:Object(K.jsx)(ze,{btnType:"bi bi-house",textBtn:"Home"})})}),Object(K.jsx)("li",{className:"options_item",children:Object(K.jsx)(S.c,{exact:!0,to:"/users/".concat(n.uid),children:Object(K.jsx)(ze,{btnType:"bi bi-person",textBtn:"Perfil"})})}),Object(K.jsx)("li",{className:"options_item",children:Object(K.jsx)(S.c,{exact:!0,to:"/search",children:Object(K.jsx)(ze,{btnType:"bi bi-search",textBtn:"Buscar"})})})]}),Object(K.jsxs)("ul",{className:"options_list options_list_actions",children:[Object(K.jsx)("li",{className:"options_item",children:Object(K.jsx)(ze,{btnType:"bi bi-pencil-square",textBtn:"New Post",handleClick:function(){c(Z())}})}),o.data&&b(),"edit-user"===u&&b()]}),Object(K.jsx)("ul",{className:"options_list options_list_actions",children:Object(K.jsx)("li",{className:"options_item",children:Object(K.jsx)(ze,{btnType:"bi bi-box-arrow-left",textBtn:"Logout",handleClick:function(){c(H(a))}})})})]})})},Ye=function(){var e=Object(r.c)((function(e){return e.auth})).user,t=Object(P.g)(),a=Object(r.b)(),c=Object(ae.d)({resolver:Object(le.a)(me)}),n=c.register,i=c.handleSubmit,l=c.reset,d=c.watch,u=c.formState.errors,j=d("image",[]),b=Object(s.useState)({src:e.img,alt:"Upload an Image"}),m=Object(re.a)(b,2),h=m[0],O=h.alt,p=h.src,x=m[1];Object(s.useEffect)((function(){j.length&&x({src:URL.createObjectURL(j[0]),alt:j[0].name})}),[j]);return Object(K.jsx)("div",{className:"edit_screen",children:Object(K.jsx)("div",{className:"container_form_edit",children:Object(K.jsxs)("form",{className:"edit_user_form",onSubmit:i((function(s){var c={name:s.name,surname:s.surname,email:s.email,facebookUrl:s.facebookUrl,twitterUrl:s.twitterUrl,githubUrl:s.githubUrl,linkedinUrl:s.linkedinUrl,newPassword:s.newPassword,oldPassword:s.oldPassword};if(s.image.length>0){var n=new FormData;n.append("archivo",s.image[0]),a(function(e,t,a){return function(){var s=Object(T.a)(E.a.mark((function s(c){var n,r;return E.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,B("uploads/users/".concat(a),e,"PUT");case 2:return n=s.sent,s.next=5,n.json();case 5:r=s.sent,n.ok?(c(W(r.data)),t.push("/users/".concat(a))):console.log(r.error);case 8:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()}(n,t,e.uid))}a(function(e,t,a){return function(){var s=Object(T.a)(E.a.mark((function s(c){var n,r;return E.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,D("users/".concat(a),e,"PUT");case 2:return n=s.sent,s.next=5,n.json();case 5:r=s.sent,n.ok?(L.a.fire("".concat(r.msg),"".concat(r.msgPassword),"success"),c(W(r.data)),t.push("/users/".concat(a))):L.a.fire("Oops...",r.error.toLocaleString(),"error");case 8:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()}(c,t,e.uid))})),children:[Object(K.jsxs)("div",{className:"edit_img_field",children:[Object(K.jsxs)("div",{className:"img_box_field",children:[Object(K.jsx)("img",{src:p,alt:O}),Object(K.jsx)("label",{htmlFor:"imageUrl",className:"input_file_user",children:Object(K.jsx)("i",{className:"bi bi-camera"})})]}),Object(K.jsx)("input",Object(o.a)({hidden:!0,type:"file",id:"imageUrl",defaultValue:[]},n("image"))),u.image&&Object(K.jsx)("p",{className:"error",children:u.image.message})]}),Object(K.jsxs)("div",{className:"edit_user_field",children:[Object(K.jsx)("label",{className:"label_field",children:"Nombre"}),Object(K.jsx)("input",Object(o.a)({type:"text",placeholder:"First Name",id:"name",defaultValue:A(e.name)},n("name"))),u.name&&Object(K.jsx)("p",{className:"error",children:u.name.message})]}),Object(K.jsxs)("div",{className:"edit_user_field",children:[Object(K.jsx)("label",{className:"label_field",children:"Apellidos"}),Object(K.jsx)("input",Object(o.a)({type:"text",placeholder:"Last Name",defaultValue:A(e.surname)},n("surname"))),u.surname&&Object(K.jsx)("p",{className:"error",children:u.surname.message})]}),Object(K.jsxs)("div",{className:"edit_user_field",children:[Object(K.jsx)("label",{className:"label_field",children:"Email"}),Object(K.jsx)("input",Object(o.a)({type:"text",placeholder:"Email",defaultValue:e.email},n("email"))),u.email&&Object(K.jsx)("p",{className:"error",children:u.email.message})]}),Object(K.jsxs)("div",{className:"edit_user_field",children:[Object(K.jsxs)("label",{className:"label_field",children:[Object(K.jsx)("i",{className:"bi bi-facebook"}),"Url Facebook"]}),Object(K.jsx)("input",Object(o.a)({type:"text",placeholder:"Url Facebook",defaultValue:e.facebookUrl},n("facebookUrl"))),u.facebookUrl&&Object(K.jsx)("p",{className:"error",children:u.facebookUrl.message})]}),Object(K.jsxs)("div",{className:"edit_user_field",children:[Object(K.jsxs)("label",{className:"label_field",children:[Object(K.jsx)("i",{className:"bi bi-twitter"}),"Url Twitter"]}),Object(K.jsx)("input",Object(o.a)({type:"text",placeholder:"Url Twitter",defaultValue:e.twitterUrl},n("twitterUrl"))),u.twitterUrl&&Object(K.jsx)("p",{className:"error",children:u.twitterUrl.message})]}),Object(K.jsxs)("div",{className:"edit_user_field",children:[Object(K.jsxs)("label",{className:"label_field",children:[Object(K.jsx)("i",{className:"bi bi-github"}),"Url Github"]}),Object(K.jsx)("input",Object(o.a)({type:"text",placeholder:"Url Github",defaultValue:e.githubUrl},n("githubUrl"))),u.githubUrl&&Object(K.jsx)("p",{className:"error",children:u.githubUrl.message})]}),Object(K.jsxs)("div",{className:"edit_user_field",children:[Object(K.jsxs)("label",{className:"label_field",children:[Object(K.jsx)("i",{className:"bi bi-linkedin"}),"Url Linkedin"]}),Object(K.jsx)("input",Object(o.a)({type:"text",placeholder:"Url Linkedin",defaultValue:e.linkedinUrl},n("linkedinUrl"))),u.linkedinUrl&&Object(K.jsx)("p",{className:"error",children:u.linkedinUrl.message})]}),Object(K.jsxs)("div",{className:"edit_user_field",children:[Object(K.jsx)("label",{className:"label_field",children:"Password antigua"}),Object(K.jsx)("input",Object(o.a)({type:"password",placeholder:"old Password"},n("oldPassword"))),u.oldPassword&&Object(K.jsx)("p",{className:"error",children:u.oldPassword.message}),Object(K.jsx)("p",{className:"alert_password",children:"Si no desea cambiar su contrase\xf1a deja esto en blanco"})]}),Object(K.jsxs)("div",{className:"edit_user_field",children:[Object(K.jsx)("label",{className:"label_field",children:"Password nueva"}),Object(K.jsx)("input",Object(o.a)({type:"password",placeholder:"new password"},n("newPassword"))),u.newPassword&&Object(K.jsx)("p",{className:"error",children:u.newPassword.message})]}),Object(K.jsxs)("div",{className:"btn-box",children:[Object(K.jsx)("button",{className:"button btn_call",id:"save-button",type:"submit",children:"Edit"}),Object(K.jsx)("button",{className:"button btn_call",id:"clear-button",onClick:function(t){t.preventDefault(),l(),x({src:e.img,alt:"Upload an Image"})},children:"Reset"}),Object(K.jsx)("button",{className:"button btn_call delete",id:"delete-button",onClick:function(s){s.preventDefault(),a(J(t,e.uid))},children:"Delete User"})]})]})})})},$e=function(e){return e.isAuthenticated?Object(K.jsx)(P.b,Object(o.a)({},e)):Object(K.jsx)(P.a,{to:"/"})},He=function(){var e=Object(r.c)((function(e){return e.auth})),t=e.checking,a=e.user,c=Object(r.b)();return Object(s.useEffect)((function(){c(function(){var e=Object(T.a)(E.a.mark((function e(t){var a,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D("auth/refresh");case 2:return a=e.sent,e.next=5,a.json();case 5:s=e.sent,a.ok?(localStorage.setItem("token",s.token),localStorage.setItem("token-init",(new Date).getTime()),t(X(s.user))):t({type:x});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[c]),t?Object(K.jsx)("h1",{children:"Espere..."}):Object(K.jsxs)(S.a,{children:[Object(K.jsx)(ve,{}),Object(K.jsxs)("div",{className:"screen",children:[!!a.uid&&Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(P.b,{exact:!0,path:"/posts/:idPost",component:Ve}),Object(K.jsx)(P.b,{exact:!0,path:"/users/:idUser",component:Ve}),Object(K.jsx)(P.b,{exact:!0,path:"/edit-user",component:Ve}),Object(K.jsx)(P.b,{exact:!0,path:"/search",component:Ve}),Object(K.jsx)(P.b,{exact:!0,path:"/",component:Ve})]}),Object(K.jsx)("div",{className:"screen_content",children:Object(K.jsxs)(P.d,{children:[Object(K.jsx)(P.b,{exact:!0,path:"/",component:Ee}),Object(K.jsx)(P.b,{exact:!0,path:"/posts/:idPost",component:Ie}),Object(K.jsx)(P.b,{exact:!0,path:"/search",component:Fe}),Object(K.jsx)(P.b,{exact:!0,path:"/users/:idUser",component:Be}),Object(K.jsx)($e,{exact:!0,path:"/edit-user",isAuthenticated:!!a.uid,component:Ye}),Object(K.jsx)(P.a,{to:"/"})]})})]})]})},Je=function(){return Object(K.jsx)(r.a,{store:y,children:Object(K.jsx)(He,{})})};n.a.render(Object(K.jsx)(Je,{}),document.getElementById("root"))}},[[215,1,2]]]);
//# sourceMappingURL=main.aeaeee2f.chunk.js.map